<!DOCTYPE html>
<html>
  <head>
    <title>AR.js A-Frame Location-based</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script
      type="text/javascript"
      src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js"
    ></script>
    <script
      type="text/javascript"
      src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"
    ></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <style>
      body {
        background-image: url(tbg.webp);
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center center;
        position: fixed;
        background-attachment: fixed;
      }
      @media (max-width: 576px) {
        .rewards {
          width: 50%;
        }
      }
      .rewards h3 {
        font-size: 24px;
      }
      .rewards h3 {
        font-size: 1.5rem;
      }
      .rewards {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .rewards {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: auto auto;
        grid-gap: 10px;
      }
      .question-container {
        display: none;
      }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>



  <body class="!m-0 p-0">
    <div class="flex justify-center items-center min-h-screen">
      <div id="cameraScene">
        <a-scene
          vr-mode-ui="enabled: false"
          arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false"
          renderer="antialias: true; alpha: true"
        >
          <!-- Add a video element to capture the camera feed -->
          <video
            id="cameraFeed"
            autoplay
            playsinline
            style="display: none"
          ></video>

          <!-- Use getUserMedia to access the camera -->
          <script>
            // Get the video element
            const video = document.getElementById("cameraFeed");

            let cameraStream = null;
            // Check if getUserMedia is available in the browser
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
              navigator.mediaDevices
                .getUserMedia({ video: true })
                .then(function (stream) {
                  // Assign the camera stream to the video element
                  video.srcObject = stream;
                  cameraStream = stream;
                })
                .catch(function (error) {
                  console.error("Error accessing camera:", error);
                });
            } else {
              console.error("getUserMedia is not supported in this browser.");
            }
          </script>

          <!-- Set up the AR camera -->
          <a-camera
            gps-new-camera="gpsMinDistance: 5"
            maxDistance="20"
            position="0 0.1 0"
          ></a-camera>
          <a-entity
            id="gltfModel"
            gltf-model="url(3dAssets/1.glb)"
            gps-new-entity-place="latitude: 10.049163; longitude:  76.331670"
            scale="1 1 1"
          ></a-entity>
        </a-scene>
      </div>
      <!-- Content goes here -->
      <!-- <div id="mapScene" class="bg-white bg-opacity-10 rounded-xl text-white border border-white">
        <div class="py-3 flex items-center px-5">
            <div class="px-9">
                Rewards Earned
            </div>
            <div>
                <button>X</button>
            </div>
        </div>
        <div class="flex justify-center items-center text-bold border border-white flex flex-col py-6 ">
            <img src="reward.jpg" class="rounded-full p-2">
            <h3>Congo u won a food coupon</h3>
        </div>
        <div class="flex justify-center items-center px-3 py-4">
            <button
                class="bg-gradient-to-r from-yellow-500 to-red-500 text-white font-semibold py-1 px-4 rounded-xl border border-white ">
                Claim
            </button>

        </div>
      </div> -->
      <div
        class="border-2 w-11/12 bg-[#1E1E1E] text-white rounded-lg z-10 question-container"
      >
        <div class="flex flex-row items-start gap-2 p-5 border-b-2">
          <h1 class="w-3/4">Question 1</h1>
          <div>
            <img src="close-icon.svg" alt="" />
          </div>
        </div>
        <div class="flex py-6 px-3">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
            Pellentesque et odio sed est pellentesque gravida sit amet at orci.
            Phasellus eget iaculis tortor,
          </p>
        </div>
        <div
          class="border-t-2 border flex w-full h-full md:p-5 p-3 py-5 justify-center items-center content-center gap-4 flex-wrap bg-[rgba(255, 255, 255, 0.05)]"
        >
          <button
            class="flex rounded-lg border border-solid border-[#FFF] bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-[5px] w-36 h-12 p-4 justify-center items-center flex-shrink-0 text-white font-inter font-semibold"
          >
            Option 1
          </button>
          <button
            class="flex rounded-lg border border-solid border-[#FFF] bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-[5px] w-36 h-12 p-4 justify-center items-center flex-shrink-0 text-white font-inter font-semibold"
          >
            Option 2
          </button>
          <button
            class="flex rounded-lg border border-solid border-[#FFF] bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-[5px] w-36 h-12 p-4 justify-center items-center flex-shrink-0 text-white font-inter font-semibold"
          >
            Option 3
          </button>
          <button
            class="flex rounded-lg border border-solid border-[#FFF] bg-gradient-to-r from-orange-500 to-red-500 backdrop-blur-[5px] w-36 h-12 p-4 justify-center items-center flex-shrink-0 text-white font-inter font-semibold"
          >
            Option 4
          </button>
        </div>
      </div>
    </div>
    <div class="h-[10%] mb-0 w-screen">
      <img src="bg.png" alt="bg" class="w-screen h-20 absolute bottom-0" />
      <div id="mapBtn">
        <img
          src="map-icon.png"
          alt="camera"
          class="w-11 h-11 my-4 mx-5 absolute bottom-0 border-b-20 border-#1E1E1E"
        />
      </div>
      <div>
        <img
          src="float.png"
          alt="map"
          class="w-11 h-11 absolute bottom-1 right-0 mr-5 mb-4"
        />
      </div>
      <div id="centerBtn">
        <img
          id="centerImg"
          src="camera.png"
          alt="btn"
          class="w-20 absolute left-1/2 transform -translate-x-1/2 bottom-10 right-0.5 mb-3"
        />
      </div>
    </div>
    <script src="scripts/button.js"></script>
    <!-- <script src="scripts/location.js"></script> -->
    <script>
      var locIndex = 1;
      function updateModel() {
        console.log("updating model called");
        var model = document.getElementById("gltfModel");
        model.removeAttribute("gltf-model");
        const newModelURL = `3dAssets/${locIndex + 1}.glb`;
        locIndex=locIndex + 1;
        console.log(`${locIndex + 1}`);
        model.setAttribute('gltf-model', `${newModelURL}`);
        console.log("model updated");
      }
    
      const mybutton2 = document.getElementById("mapBtn");
      mybutton2.addEventListener("click", () => {
        updateModel();
      });
    </script>
    
  </body>
</html>
